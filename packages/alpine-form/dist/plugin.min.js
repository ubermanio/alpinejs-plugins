(()=>{var a=o=>{try{return JSON.parse(o)}catch{return o.toString()}},p=o=>{o.data("form",()=>(s,i={})=>({init(){console.log({url:s,options:i})},url:s,_touched:{},_values:i?.initialValues||{},_errors:{},_rules:{},_validate(t=!1){Object.keys(this._errors).forEach(e=>{this._errors[e]=[]}),console.log("validating"),Object.keys(this._rules).forEach(e=>{if(!t&&!this._touched[e])return;let r=this._rules[e],c=this._values[e];r(c).forEach(([l,n])=>{console.log({field:e,check:l,message:n}),l||this._errors[e].push(n)})})},field(t,e=()=>[]){return this._touched[t]=!1,this._values[t]??="",this._rules[t]??=e,this._errors[t]=[],{["@change"]:r=>{this._values[t]=a(r.target?.value)},["@input"]:r=>{this._values[t]=a(r.target?.value),this._validate()},["@focus"]:()=>{this._touched[t]||(this._touched[t]=!0)},[":value"]:()=>this._values[t]}}}))},u=p;document.addEventListener("alpine:init",()=>{console.log("init"),window.Alpine.plugin(u)});})();
